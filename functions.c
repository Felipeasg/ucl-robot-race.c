#include <stdio.h>#include <stdlib.h>#include <unistd.h>#include <string.h>#include <stdbool.h>#include <sys/socket.h>#include <arpa/inet.h>#include <string.h>#include "functions.h"#define WHEELREVOLUTION 100 * 3.14159#define WHEELDISTANCE 240char buf[80];struct sockaddr_in s_addr;int sock;struct sensors Sensors;void initSocket() {  if ((sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0) {    fprintf(stderr, "Failed to create socket1\n");    exit(1);  }    s_addr.sin_family = AF_INET;  s_addr.sin_addr.s_addr = inet_addr("127.0.0.1");  s_addr.sin_port = htons(55443);    if (connect(sock, (struct sockaddr *) &s_addr, sizeof(s_addr)) < 0) {    fprintf(stderr, "Failed to create socket2\n");    exit(1);  }}/* Validation functions start */bool inLimit(int voltage) {  if (voltage <= 127 && voltage >= -127)    return true;    return false;}void stopIf (bool status) {  if (status) exit(1);}/* Validation functions end *//* Parsing functions start */void readResult(result) {}/* Parsing functions end*//* Level abstraction: 0 start */void nextCommand() {  write(sock, buf, strlen(buf)); memset(buf, 0, 80); read(sock, buf, 80);}void parseCmd (char* buf, char* elaborated[5]) {  int i = 0;  elaborated[i] = strtok (buf," ");  while (elaborated[i++] != NULL) {    elaborated[i] = strtok (NULL, " ");  }  printf("\n\t %s %s\n", elaborated[2],elaborated[3]);}void sensorsGet() {  /*async*/  char* elaborated[5];  sprintf(buf, "S MELR\n");  printf("S MELR\n");  nextCommand();  parseCmd(buf, elaborated);}void moveAtVoltage(int voltage1, int voltage2) {  stopIf(!inLimit(voltage1) || !inLimit(voltage2));  sprintf(buf, "M LR %i %i\n", voltage1, voltage2);  printf("M LR %i %i\n", voltage1, voltage2);  nextCommand();  sensorsGet();}void turnAtVoltage(int voltage1, int voltage2) {  stopIf(!inLimit(voltage1) || !inLimit(voltage2));  sprintf(buf, "M LR %i %i\n", voltage1, voltage2);  printf("M LR %i %i\n", voltage1, voltage2);  nextCommand();}void stopMovement() {  sprintf(buf, "M LR 0 0\n");  printf("M LR 0 0\n");  nextCommand();}/* Level abstraction: 0 end*//* Level abstraction: 1 start */void turnOnSpotAtVoltage(int voltage) {  turnAtVoltage(voltage, -voltage);  nextCommand();}void moveStraightAtVoltage(int voltage) {  moveAtVoltage(voltage, voltage);}/* Level abstraction: 1 end */